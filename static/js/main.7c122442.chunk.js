(this["webpackJsonpreact-document-order-example"]=this["webpackJsonpreact-document-order-example"]||[]).push([[0],{11:function(e,t,n){e.exports=n(17)},12:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);n(12);var r=n(0),a=n.n(r),l=n(9),o=n.n(l),u=n(2),c=Symbol("OrderedValues Context signifier");function i(e){return"object"===typeof e&&c in e}function s(e,t){for(;t<e.nodes.length;){var n=e.nodes[t],r=i(n)?s(n,0):n;if(null!==r&&void 0!==r)return r;++t}return null}function d(e,t){for(;--t>=0;){var n=e.nodes[t],r=i(n)?d(n,n.nodes.length):n;if(null!==r&&void 0!==r)return r}return null}function m(e){if(!e)throw new Error("OrderedValues hooks can only be used within one of the OrderedValues's <Context/>s");return e}function f(e){e.parent?f(e.parent):e.registerChange(void 0)}function v(){var e=a.a.createContext(null),t=a.a.createContext(null);function n(){for(var t=m(Object(r.useContext)(e));t.parent;)t=t.parent;return t}return{Provider:function(n){var l=n.children,o=Object(r.useReducer)((function(e){return++e}),0),u=o[0],i=o[1],s=Object(r.useContext)(e),d=Object(r.useMemo)((function(){return function(e){var t;return(t={})[c]=void 0,t.nodes=[],t.parent=null,t.registerChange=e,t}(i)}),[]);return Object(r.useMemo)((function(){s&&(d.parent=s,s.nodes.push(d))}),[s]),Object(r.useLayoutEffect)((function(){if(s)return f(d),function(){var e=s.nodes.indexOf(d);e>-1&&s.nodes.splice(e,1),d.parent===s&&(d.parent=null)}}),[s]),a.a.createElement(e.Provider,{value:d},s?l:a.a.createElement(t.Provider,{value:u},l))},useRegister:function(t){var n=m(Object(r.useContext)(e));Object(r.useMemo)((function(){n.nodes.push(t)}),[n,t]),Object(r.useLayoutEffect)((function(){return f(n),function(){for(var e=n.nodes.length-1;e>=0;--e)if(n.nodes[e]===t)return n.nodes.splice(e,1),void f(n)}}),[n,t])},useValueAfter:function(e){return Object(r.useContext)(t),function e(t,n){for(var r=0;r<t.nodes.length;r++){var a=t.nodes[r];if(i(a)){var l=e(a,n);if(void 0===l)continue;if(null!==l)return l}else if(a!==n)continue;return s(t,r+1)}}(n(),e)},useValueBefore:function(e){return Object(r.useContext)(t),function e(t,n){for(var r=t.nodes.length-1;r>=0;r--){var a=t.nodes[r];if(i(a)){var l=e(a,n);if(void 0===l)continue;if(null!==l)return l}else if(a!==n)continue;return d(t,r)}}(n(),e)},useFirst:function(){return Object(r.useContext)(t),s(n(),0)},useLast:function(){Object(r.useContext)(t);var e=n();return d(e,e.nodes.length)}}}var b=v();function h(){return a.a.createElement(b.Provider,null,a.a.createElement(E,null))}function E(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],l=t[1];return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement(p,{label:"Name"}),a.a.createElement(p,{label:"Email Address",onChange:l}),a.a.createElement(b.Provider,null,n.endsWith("@example.com")&&a.a.createElement(p,{label:"Position at Example Corp."})),a.a.createElement(p,{label:"Favourite Fruit"}))}function p(e){var t=e.label,n=e.onChange,l=Object(r.useRef)(null);return b.useRegister(l),a.a.createElement("input",Object.assign({placeholder:t,style:{maxWidth:"20em",margin:"0.2em"},onChange:n&&function(e){return n(e.target.value)},ref:l},x(l)))}var x=function(e){var t=b.useValueBefore(e),n=b.useValueAfter(e);return{onKeyDownCapture:function(e){var r;if("ArrowUp"===e.nativeEvent.key)e.preventDefault(),null===t||void 0===t||null===(r=t.current)||void 0===r||r.focus();else if("ArrowDown"===e.nativeEvent.key){var a;e.preventDefault(),null===n||void 0===n||null===(a=n.current)||void 0===a||a.focus()}}}},g=n(3),y=v(),O=function(e){var t=y.useFirst(),n=y.useValueBefore(e),r=y.useValueAfter(e),a=y.useLast();return{onKeyDownCapture:function(e){var l,o;if("ArrowUp"===e.nativeEvent.key)e.preventDefault(),null===(l=e.nativeEvent.metaKey?t:n)||void 0===l||null===(o=l.current)||void 0===o||o.focus();else if("ArrowDown"===e.nativeEvent.key){var u,c;e.preventDefault(),null===(u=e.nativeEvent.metaKey?a:r)||void 0===u||null===(c=u.current)||void 0===c||c.focus()}}}},w=function(e){var t=e.onRemove,n=Object(r.useRef)(null);return y.useRegister(n),a.a.createElement("div",null,a.a.createElement("div",{style:{flexDirection:"row"}},a.a.createElement("input",Object.assign({ref:n},O(n))),a.a.createElement("button",{onClick:t},"x")),a.a.createElement("div",{style:{marginLeft:"5px",borderLeft:"5px solid lightgray",paddingLeft:"5px"}},a.a.createElement(C,{addLabel:"Add sub-item"})))},j=function(e){var t=e.label,n=e.onClick,l=Object(r.useRef)(null);return y.useRegister(l),a.a.createElement("button",Object.assign({ref:l,onClick:n},O(l)),t)},C=function(e){var t=e.addLabel,n=Object(r.useState)({ids:[],nextId:0}),l=Object(u.a)(n,2),o=l[0],c=o.ids,i=o.nextId,s=l[1];return a.a.createElement("div",{style:{flexDirection:"column"}},a.a.createElement(y.Provider,null,c.map((function(e,t){return a.a.createElement("div",{key:e,style:{flexDirection:"row"}},a.a.createElement(w,{onRemove:function(){return s({ids:[].concat(Object(g.a)(c.slice(0,t)),Object(g.a)(c.slice(t+1))),nextId:i})}}))}))),a.a.createElement(j,{label:t,onClick:function(){return s({ids:[].concat(Object(g.a)(c),[i]),nextId:i+1})}}))};function k(){return a.a.createElement(y.Provider,null,a.a.createElement("p",null,"Squint hard enough, and it's a hierarchical to-do list UI."),a.a.createElement("p",null,"Anyway, hit a few add buttons in various orders, and then see how you can use the arrow kets to navigate up and down among the text inputs and add-buttons in document order. Use the meta key (command key on MacOS) to move to the top or bottom of the controls in the list."),a.a.createElement(C,{addLabel:"Add top-level item"}))}var D=n(10),R=v(),A=function(e){var t=e.name;R.useRegister(t);var n=R.useValueAfter(t);return a.a.createElement("div",{style:P},"Label ",t," followed by ",n||a.a.createElement("span",{role:"img","aria-label":"nothing",style:V},"\u274c"))};function L(){var e=Object(r.useReducer)((function(e,t){var n=Object(D.a)(e).slice(0);return[].concat(Object(g.a)(n),[t])}),["baz"]),t=Object(u.a)(e,2),n=t[0],l=t[1];return a.a.createElement(R.Provider,null,a.a.createElement(A,{name:"foo"}),a.a.createElement(R.Provider,null,n.map((function(e){return a.a.createElement(A,{key:e,name:e})}))),a.a.createElement(A,{name:"bar"}),a.a.createElement("button",{onClick:function(){return l("mid ".concat(n.length))}},"Add"))}var P={margin:"0.4em",backgroundColor:"#def",padding:"0.4em",borderRadius:"1em"},V={lineHeight:1},T=function(){return a.a.createElement("div",{style:I},a.a.createElement("h1",{style:S},a.a.createElement("code",null,"react-document-order")," Demo"),a.a.createElement("p",{style:W},"This is a small demonstration of ",a.a.createElement("a",{style:M,href:"https://github.com/barnardb/react-document-order"},"react-document-order"),". The examples are best understood with reference to their code. The ",a.a.createElement("a",{style:M,href:"https://github.com/barnardb/react-document-order#react-document-order"},a.a.createElement("code",null,"README.md")," file"),' walks through the code implmenting the "Readme Example"'),a.a.createElement("main",{style:U},a.a.createElement("section",{style:B("#ca8")},a.a.createElement("h2",null,"Readme Example"),a.a.createElement("p",null,a.a.createElement("a",{style:M,href:"https://github.com/barnardb/react-document-order/blob/main/example/src/ReadmeExample.tsx"},"See the code in ",a.a.createElement("code",null,"ReadmeExample.tsx"))),a.a.createElement("p",null,'Use the up and down arrow keys to move between fields, with and without an email address ending in "@example.com".'),a.a.createElement(h,null)),a.a.createElement("section",{style:B("#8ca")},a.a.createElement("h2",null,"Trivial Example"),a.a.createElement("p",null,a.a.createElement("a",{style:M,href:"https://github.com/barnardb/react-document-order/blob/main/example/src/TrivialExample.tsx"},"See the code in ",a.a.createElement("code",null,"TrivialExample.tsx"))),a.a.createElement("p",null,"Look at the code to see how each label refers to the next label."),a.a.createElement(L,null)),a.a.createElement("section",{style:B("#a8c")},a.a.createElement("h2",null,"Hierarchical To-Do List"),a.a.createElement("p",null,a.a.createElement("a",{style:M,href:"https://github.com/barnardb/react-document-order/blob/main/example/src/ToDoList.tsx"},"See the code in ",a.a.createElement("code",null,"ToDoList.tsx"))),a.a.createElement(k,null))))},I={margin:"1.5em",display:"flex",flexDirection:"column",alignItems:"center"},S={margin:"0.5em"},W={marginInline:"0.5em",maxWidth:"40em",textAlign:"center"},M={fontWeight:"bold"},U={width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly"},B=function(e){return{margin:"0.5em",flex:"1 0 auto",maxWidth:"28em",width:"15em",border:"0.5em solid ".concat(e),borderRadius:"1em",padding:"1em"}};o.a.render(a.a.createElement(T,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.7c122442.chunk.js.map