(this["webpackJsonpreact-document-order-example"]=this["webpackJsonpreact-document-order-example"]||[]).push([[0],{11:function(e,t,n){e.exports=n(17)},12:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);n(12);var r=n(0),a=n.n(r),l=n(9),o=n.n(l),u=n(2),c=Symbol("OrderedValues Context signifier");function i(e){return"object"===typeof e&&c in e}function s(e,t){for(;t<e.nodes.length;){var n=e.nodes[t],r=i(n)?s(n,0):n;if(null!==r&&void 0!==r)return r;++t}return null}function d(e,t){for(;--t>=0;){var n=e.nodes[t],r=i(n)?d(n,n.nodes.length):n;if(null!==r&&void 0!==r)return r}return null}function f(e){if(!e)throw new Error("OrderedValues hooks can only be used within one of the OrderedValues's <Context/>s");return e}function m(e){e.parent?m(e.parent):e.registerChange(void 0)}function v(){var e=a.a.createContext(null),t=a.a.createContext(null);function n(){for(var t=f(Object(r.useContext)(e));t.parent;)t=t.parent;return t}return{Provider:function(n){var l=n.children,o=Object(r.useReducer)((function(e){return++e}),0),u=o[0],i=o[1],s=Object(r.useContext)(e),d=Object(r.useMemo)((function(){return function(e){var t;return(t={})[c]=void 0,t.nodes=[],t.parent=null,t.registerChange=e,t}(i)}),[]);return Object(r.useMemo)((function(){s&&(d.parent=s,s.nodes.push(d))}),[s]),Object(r.useLayoutEffect)((function(){if(s)return m(d),function(){var e=s.nodes.indexOf(d);e>-1&&s.nodes.splice(e,1),d.parent===s&&(d.parent=null)}}),[s]),a.a.createElement(e.Provider,{value:d},s?l:a.a.createElement(t.Provider,{value:u},l))},useRegister:function(t){var n=f(Object(r.useContext)(e));Object(r.useMemo)((function(){n.nodes.push(t)}),[n,t]),Object(r.useLayoutEffect)((function(){return m(n),function(){for(var e=n.nodes.length-1;e>=0;--e)if(n.nodes[e]===t)return n.nodes.splice(e,1),void m(n)}}),[n,t])},useValueAfter:function(e){return Object(r.useContext)(t),function e(t,n){for(var r=0;r<t.nodes.length;r++){var a=t.nodes[r];if(i(a)){var l=e(a,n);if(void 0===l)continue;if(null!==l)return l}else if(a!==n)continue;return s(t,r+1)}}(n(),e)},useValueBefore:function(e){return Object(r.useContext)(t),function e(t,n){for(var r=t.nodes.length-1;r>=0;r--){var a=t.nodes[r];if(i(a)){var l=e(a,n);if(void 0===l)continue;if(null!==l)return l}else if(a!==n)continue;return d(t,r)}}(n(),e)},useFirst:function(){return Object(r.useContext)(t),s(n(),0)},useLast:function(){Object(r.useContext)(t);var e=n();return d(e,e.nodes.length)}}}var E=v();function b(){return a.a.createElement(E.Provider,null,a.a.createElement(p,null))}function p(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],l=t[1];return a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement(h,{label:"Name"}),a.a.createElement(h,{label:"Email Address",onChange:l}),a.a.createElement(E.Provider,null,n.endsWith("@example.com")&&a.a.createElement(h,{label:"Position at Example Corp."})),a.a.createElement(h,{label:"Favourite Fruit"}))}function h(e){var t=e.label,n=e.onChange,l=Object(r.useRef)(null);return E.useRegister(l),a.a.createElement("input",Object.assign({placeholder:t,onChange:n&&function(e){return n(e.target.value)},ref:l},O(l)))}var O=function(e){var t=E.useValueBefore(e),n=E.useValueAfter(e);return{onKeyDownCapture:function(e){var r;if("ArrowUp"===e.nativeEvent.key)e.preventDefault(),null===t||void 0===t||null===(r=t.current)||void 0===r||r.focus();else if("ArrowDown"===e.nativeEvent.key){var a;e.preventDefault(),null===n||void 0===n||null===(a=n.current)||void 0===a||a.focus()}}}},x=n(3),g=v(),j=function(e){var t=g.useFirst(),n=g.useValueBefore(e),r=g.useValueAfter(e),a=g.useLast();return{onKeyDownCapture:function(e){var l,o;if("ArrowUp"===e.nativeEvent.key)e.preventDefault(),null===(l=e.nativeEvent.metaKey?t:n)||void 0===l||null===(o=l.current)||void 0===o||o.focus();else if("ArrowDown"===e.nativeEvent.key){var u,c;e.preventDefault(),null===(u=e.nativeEvent.metaKey?a:r)||void 0===u||null===(c=u.current)||void 0===c||c.focus()}}}},y=function(e){var t=e.onRemove,n=Object(r.useRef)(null);return g.useRegister(n),a.a.createElement("div",null,a.a.createElement("div",{style:{flexDirection:"row"}},a.a.createElement("input",Object.assign({ref:n},j(n))),a.a.createElement("button",{onClick:t},"x")),a.a.createElement("div",{style:{marginLeft:"5px",borderLeft:"5px solid lightgray",paddingLeft:"5px"}},a.a.createElement(C,{addLabel:"Add sub-item"})))},w=function(e){var t=e.label,n=e.onClick,l=Object(r.useRef)(null);return g.useRegister(l),a.a.createElement("button",Object.assign({ref:l,onClick:n},j(l)),t)},C=function(e){var t=e.addLabel,n=Object(r.useState)({ids:[],nextId:0}),l=Object(u.a)(n,2),o=l[0],c=o.ids,i=o.nextId,s=l[1];return a.a.createElement("div",{style:{flexDirection:"column"}},a.a.createElement(g.Provider,null,c.map((function(e,t){return a.a.createElement("div",{key:e,style:{flexDirection:"row"}},a.a.createElement(y,{onRemove:function(){return s({ids:[].concat(Object(x.a)(c.slice(0,t)),Object(x.a)(c.slice(t+1))),nextId:i})}}))}))),a.a.createElement(w,{label:t,onClick:function(){return s({ids:[].concat(Object(x.a)(c),[i]),nextId:i+1})}}))};function k(){return a.a.createElement(g.Provider,null,a.a.createElement("p",null,"Squint hard enough, and it's a hierarchical to-do list UI."),a.a.createElement("p",null,"Anyway, hit a few add buttons in various orders, and then see how you can use the arrow kets to navigate up and down among the text inputs and add-buttons in document order. Use the meta key (command key on MacOS) to move to the top or bottom of the controls in the list."),a.a.createElement(C,{addLabel:"Add top-level item"}))}var D=n(10),L=v(),A=function(e){var t=e.name;L.useRegister(t);var n=L.useValueAfter(t);return console.log("BEHOLD",t,n),a.a.createElement("div",null,"Label ",t," followed by ",n)};function R(){var e=Object(r.useReducer)((function(e,t){var n=Object(D.a)(e).slice(0);return[].concat(Object(x.a)(n),[t])}),["baz"]),t=Object(u.a)(e,2),n=t[0],l=t[1];return a.a.createElement(L.Provider,null,a.a.createElement(A,{name:"foo"}),a.a.createElement(L.Provider,null,n.map((function(e){return a.a.createElement(A,{key:e,name:e})}))),a.a.createElement(A,{name:"bar"}),a.a.createElement("button",{onClick:function(){return l("new middle label ".concat(n.length))}},"Add"))}var P=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,a.a.createElement("code",null,"react-document-order")," Demo"),a.a.createElement("section",null,a.a.createElement("h2",null,"Readme Example"),a.a.createElement("p",null,'Use the up and down arrow keys to move between fields, with and without an email address ending in "@example.com".'),a.a.createElement(b,null)),a.a.createElement("section",null,a.a.createElement("h2",null,"Trivial Example"),a.a.createElement("p",null,"Look at the code to see how each label refers to the next label."),a.a.createElement(R,null)),a.a.createElement("section",null,a.a.createElement("h2",null,"Hierarchical To-Do List"),a.a.createElement(k,null)))};o.a.render(a.a.createElement(P,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.154945a0.chunk.js.map